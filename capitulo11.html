<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Capítulo 11 – Librerías escalables</title>
  <link rel="stylesheet" href="./css/general.css" />
  <link rel="stylesheet" href="./css/prism.css" />
</head>
<body>
  <div class="layout">
    <button id="menu-toggle" aria-label="Mostrar menú" class="menu-toggle">☰</button>
    <aside class="sidebar">
      <nav>
        <h2>Índice</h2>
        <ul>
          <li><a href="capitulo1.html">1. Introducción</a></li>
          <li><a href="capitulo2.html">2. Instalación y configuración</a></li>
          <li><a href="capitulo3.html">3. Estructura de un componente</a></li>
          <li><a href="capitulo4.html">4. Decoradores en profundidad</a></li>
          <li><a href="capitulo5.html">5. Ciclo de vida</a></li>
          <li><a href="capitulo6.html">6. Slots y Shadow DOM</a></li>
          <li><a href="capitulo7.html">7. Comunicación entre componentes</a></li>
          <li><a href="capitulo8.html">8. Integración con APIs</a></li>
          <li><a href="capitulo9.html">9. Testing avanzado</a></li>
          <li><a href="capitulo10.html">10. Optimización</a></li>
          <li><a href="capitulo11.html">11. Librerías escalables</a></li>
          <li><a href="capitulo12.html">12. Storybook</a></li>
          <li><a href="capitulo13.html">13. Publicación</a></li>
          <li><a href="capitulo14.html">14. Buenas prácticas</a></li>
          <li><a href="capitulo15.html">15. Proyecto final</a></li>
        </ul>
      </nav>
    </aside>

    <main class="content">
      <h1>Capítulo 11: Librerías escalables</h1>

      <section>
        <h2>🏗️ Pensar en escalabilidad desde el inicio</h2>
        <p>
          Cuando desarrollas una librería de componentes con Stencil, es fundamental pensar en su estructura y organización a largo plazo. Debe ser fácil de mantener, ampliar, testear y documentar.
        </p>
      </section>

      <section>
        <h2>📁 Estructura de carpetas recomendada</h2>
        <pre><code class="language-bash">
mi-libreria/
├── src/
│   ├── components/
│   │   ├── boton/
│   │   │   ├── boton.tsx
│   │   │   ├── boton.css
│   │   │   └── boton.spec.tsx
│   │   ├── tarjeta/
│   │   │   └── ...
│   ├── utils/
│   │   └── formateadores.ts
│   ├── interfaces/
│   │   └── producto.ts
│   └── global/
│       └── estilos.css
├── stencil.config.ts
├── package.json
        </code></pre>
        <p>Separar lógica, estilos y tipos mejora la mantenibilidad.</p>
      </section>

      <section>
        <h2>🔧 Compartir utilidades entre componentes</h2>
        <p>
          Puedes usar una carpeta <code class="inline-code">utils</code> para compartir funciones entre componentes:
        </p>
        <pre><code class="language-ts">
// utils/formateadores.ts
<span class="keyword">export function</span> <span class="function">capitalizar</span>(texto: <span class="type">string</span>): <span class="type">string</span> {
  <span class="keyword">return</span> texto.charAt(0).toUpperCase() + texto.slice(1);
}
        </code></pre>
        <p>
          Y en un componente:
        </p>
        <pre><code class="language-tsx">
<span class="keyword">import</span> { capitalizar } <span class="keyword">from</span> <span class="string">'../../utils/formateadores'</span>;
        </code></pre>
      </section>

      <section>
        <h2>📦 Exportar solo lo necesario</h2>
        <p>
          En el archivo <code class="inline-code">src/index.ts</code>, puedes controlar qué componentes y utilidades se exponen:
        </p>
        <pre><code class="language-ts">
// index.ts
<span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">'./components'</span>;
<span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">'./utils/formateadores'</span>;
        </code></pre>
        <p>Esto evita que otros importen archivos internos directamente.</p>
      </section>

      <section>
        <h2>🔁 Componentes genéricos y reutilizables</h2>
        <p>Evita crear componentes acoplados. Diseña pensando en su reutilización:</p>
        <ul>
          <li>Evita lógica de negocio interna</li>
          <li>Haz que reciban datos vía <code class="inline-code">@Prop()</code></li>
          <li>Permite composición usando <code class="inline-code">&lt;slot&gt;</code></li>
        </ul>
      </section>

      <section>
        <h2>🧱 Agrupar componentes relacionados</h2>
        <p>
          Puedes organizar componentes por dominio o categoría:
        </p>
        <pre><code class="language-bash">
src/components/
├── ui/
│   ├── boton/
│   ├── icono/
├── data/
│   ├── tabla-productos/
│   ├── tarjeta-producto/
        </code></pre>
      </section>

      <section>
        <h2>🚨 Control de versiones semántico</h2>
        <p>
          Si la librería se publica (ver capítulo 13), sigue control de versiones semántico:
        </p>
        <ul>
          <li><code class="inline-code">MAJOR</code>: cambios incompatibles</li>
          <li><code class="inline-code">MINOR</code>: nuevas funcionalidades</li>
          <li><code class="inline-code">PATCH</code>: corrección de errores</li>
        </ul>
      </section>

      <section>
        <h2>📄 Documentar tipos e interfaces</h2>
        <p>
          Usa <code class="inline-code">interfaces</code> bien tipadas y coméntalas para mejorar la DX:
        </p>
        <pre><code class="language-ts">
<span class="comment">/** Representa un producto de catálogo */</span>
<span class="keyword">export interface</span> <span class="class-name">Producto</span> {
  <span class="variable">id</span>: <span class="type">number</span>;
  <span class="variable">nombre</span>: <span class="type">string</span>;
  <span class="variable">precio</span>: <span class="type">number</span>;
}
        </code></pre>
      </section>

      <section class="exercise">
        <h3>🧠 Ejercicio práctico</h3>
        <p>
          Crea la estructura inicial de una librería llamada <code class="inline-code">mi-ui-kit</code> que incluya:
        </p>
        <ul>
          <li>Un botón genérico</li>
          <li>Una tarjeta con <code class="inline-code">&lt;slot&gt;</code></li>
          <li>Una carpeta <code class="inline-code">utils</code> con una función de formateo de fecha</li>
          <li>Una interfaz <code class="inline-code">Usuario</code> con nombre y edad</li>
        </ul>
        <p>Organiza todo siguiendo el patrón de escalabilidad explicado.</p>
      </section>
    </main>
  </div>

  <footer class="footer">
  <p>&copy; 2025 Curso Avanzado de Stencil.js. Creado por Roberto de la Casa. Todos los derechos reservados.</p>
</footer>
<script src="./js/menu.js"></script>
</body>
</html>
